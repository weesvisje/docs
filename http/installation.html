<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-D8PMW3CCL2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-D8PMW3CCL2",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Ditto" href="/opensearch.xml">
<!-- Google Tag Manager -->
    <script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-PV7QFWF",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
    <!-- End Google Tag Manager -->
<script src="/js/fix-trailing-slash.js"></script><title data-react-helmet="true">Introduction | Ditto</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.ditto.live/http/installation"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-http-current"><meta data-react-helmet="true" property="og:title" content="Introduction | Ditto"><meta data-react-helmet="true" name="description" content="The Ditto HTTP API follows a RESTful pattern and is organized into several resources. API Resources typically map to the key elements of the Ditto Data Model. Applications may contain one or more Collections of Documents or TimeSeries of Events. JSON is used as the default representation for individual resources, and will be indicated by the Content-Type HTTP Header. Resources which are best represented by a sequence or stream of items are represented by JSONlines, that is new line delimited JSON. This will be indicated by the MIME type application/json-l. UTF-8 encoding is used and required unless otherwise indicated. Binary data should be Base64 encoded. Where alternative representations are desired, the API Client may use the Accept HTTP Header to indicate this in the Request."><meta data-react-helmet="true" property="og:description" content="The Ditto HTTP API follows a RESTful pattern and is organized into several resources. API Resources typically map to the key elements of the Ditto Data Model. Applications may contain one or more Collections of Documents or TimeSeries of Events. JSON is used as the default representation for individual resources, and will be indicated by the Content-Type HTTP Header. Resources which are best represented by a sequence or stream of items are represented by JSONlines, that is new line delimited JSON. This will be indicated by the MIME type application/json-l. UTF-8 encoding is used and required unless otherwise indicated. Binary data should be Base64 encoded. Where alternative representations are desired, the API Client may use the Accept HTTP Header to indicate this in the Request."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.ditto.live/http/installation"><link data-react-helmet="true" rel="alternate" href="https://docs.ditto.live/http/installation" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.ditto.live/http/installation" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://F25GUUSPFJ-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.01d0c1d0.css">
<link rel="preload" href="/assets/js/runtime~main.9b8fd043.js" as="script">
<link rel="preload" href="/assets/js/main.b87f868f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="25" height="25"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button><a href="https://ditto.live" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo.png" alt="Ditto Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.png" alt="Ditto Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Ditto</b></a><a class="navbar__item navbar__link" href="/">Documentation</a><a href="https://github.com/getditto/samples" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span class="inline">Example Apps</span></a><a href="https://github.com/getditto" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span class="inline">Open Source</span></a><a href="https://github.com/getditto/docs/discussions/categories/roadmap-and-ideas" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span class="inline">Roadmap</span></a><a class="navbar__item navbar__link" href="/changelog">Changelog</a><a class="navbar__item navbar__link" href="/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><a href="https://portal.ditto.live" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span class="inline">Login</span></a><div class="searchBox_xXbB"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_3jCp"><nav class="overflow-y-auto menu thin-scrollbar overflow-x-visible menu_1DcY menuWithAnnouncementBar_3IKd"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-undefined menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/http/installation">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-undefined menu__list-item"><a class="menu__link" href="/http/api">API Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-undefined menu__list-item"><a class="menu__link menu__link--sublist" href="#">Getting Started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-NaN menu__list-item"><a class="menu__link" tabindex="0" href="/http/common/concepts/documents">Documents</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-NaN menu__list-item"><a class="menu__link" tabindex="0" href="/http/common/concepts/querying">Querying</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-NaN menu__list-item"><a class="menu__link" tabindex="0" href="/http/common/concepts/writing">Writing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-NaN menu__list-item"><a class="menu__link" tabindex="0" href="/http/common/concepts/remove">Removing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-NaN menu__list-item"><a class="menu__link" tabindex="0" href="/http/common/concepts/designing-permissions">Access Control Permissions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-NaN menu__list-item"><a class="menu__link" tabindex="0" href="/http/timeseries">Timeseries</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-undefined menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Data Model</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-undefined menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Change Data Capture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-undefined menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">How it Works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-undefined menu__list-item"><a class="menu__link" href="/http/common/v2">2.0 Migration Guide</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2rXS"><div class="docItemContainer_1EXp"><article class="prose max-w-none"><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_Ftrd"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Introduction</h1></header><p>The Ditto HTTP API follows a RESTful pattern and is organized into several resources. API Resources typically map to the key elements of the <a href="/common/concepts/overview">Ditto Data Model</a>. Applications may contain one or more <code>Collection</code>s of <code>Documents</code> or <code>TimeSeries</code> of <code>Event</code>s. JSON is used as the default representation for individual resources, and will be indicated by the <code>Content-Type</code> HTTP Header. Resources which are best represented by a sequence or stream of items are represented by <a href="https://jsonlines.org" target="_blank" rel="noopener noreferrer">JSONlines</a>, that is new line delimited JSON. This will be indicated by the MIME type <code>application/json-l</code>. UTF-8 encoding is used and required unless otherwise indicated. Binary data should be Base64 encoded. Where alternative representations are desired, the API Client may use the <code>Accept</code> HTTP Header to indicate this in the Request.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="introduction">Introduction<a aria-hidden="true" class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>For simple examples for using the HTTP API for document storage, see the
corresponding sections in the Concepts section for
<a href="/http/common/concepts/querying">querying</a>, <a href="/http/common/concepts/writing">writing</a>,
and <a href="/http/common/concepts/remove">remove</a>. Ditto Big Peer also provides HTTP APIs for querying timeseries data. See the
<a href="/http/timeseries">timeseries section</a> for more information.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="endpoint">Endpoint<a aria-hidden="true" class="hash-link" href="#endpoint" title="Direct link to heading">​</a></h3><p>The Ditto HTTP API provides a programmatic interface for interactions with
Ditto-powered Apps which expose an HTTP Server Interface. A primary use case for
the HTTP API is external systems which integrate with <code>cloud.ditto.live</code>.</p><p>The canonical root URL for the HTTP API can be found in your app&#x27;s page on the Ditto Portal. The standard port 443 is used.</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W bash"><pre tabindex="0" class="prism-code language-bash codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> https://</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain">app_id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain">.cloud.ditto.live/api/v2</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="generating-a-client-id">Generating a Client ID<a aria-hidden="true" class="hash-link" href="#generating-a-client-id" title="Direct link to heading">​</a></h3><p>An <code>X-DITTO-CLIENT-ID</code> is required whenever issuing POST requests to the HTTP
API. You should generate one for each client, as this ID represents a client in
the Ditto mesh. </p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><h3 class="anchor anchorWithStickyNavbar_31ik" id="generate-this-id-once-and-cache-it-for-the-duration-of-each-client">Generate this ID once and cache it for the duration of each client.<a aria-hidden="true" class="hash-link" href="#generate-this-id-once-and-cache-it-for-the-duration-of-each-client" title="Direct link to heading">​</a></h3><p>Client IDs are used to resolve conflicts as part of the <a href="/common/how-it-works/crdt">CRDT</a>. Generating a new ID for each request will cause performance issues, because each
client represents a new device in the ditto mesh.  </p></div></div><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W python"><pre tabindex="0" class="prism-code language-python codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token operator" style="color:rgb(212, 212, 212)">&gt;&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> base64</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> site_id </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> epoch </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> site_id_bytes </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> site_id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_bytes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;big&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> epoch_bytes </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> epoch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_bytes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;big&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> actor_id_bytes </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> site_id_bytes </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> epoch_bytes</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> actor_id_bytes</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token string" style="color:rgb(206, 145, 120)">b&#x27;\x00\x00\x00\x00\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x00&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> base64</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">b64encode</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">actor_id_bytes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token string" style="color:rgb(206, 145, 120)">b&#x27;AAAAAAAAAAUAAAAAAAAAAA==&#x27;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="authorization">Authorization<a aria-hidden="true" class="hash-link" href="#authorization" title="Direct link to heading">​</a></h2><p>Access to the Ditto HTTP API is mediated by an <code>Authorization: Bearer</code> HTTP
Header containing a valid, signed, JWT Token (RFC 7519).</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="api-key">API Key<a aria-hidden="true" class="hash-link" href="#api-key" title="Direct link to heading">​</a></h3><p>Long-lived API tokens are great for server-side hydration, which are not owned
by a particular user. These API keys can be obtained and managed through the
portal in the &quot;API Key&quot; section. </p><p><img alt="api_key_top.png" src="/assets/images/api_key_top-91f47455bfc2165ea68d63f83a685978.png"></p><p>You can give each API key it&#x27;s own read and write permissions, scoped to particular collections or document ids. </p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Currently, you can only specify a permission query on the _id field of a document. Mutable properties are currently not supported. We are working on adding this feature.</p></div></div><p><img alt="api_key.png" src="/assets/images/api_key-14dc6daf32ad2841de781bb3ca20e4ff.png"></p><p>Once you have your API Key, you can use it as part of the <code>Authorization: Bearer</code> HTTP header in subsequent HTTP requests.</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W"><pre tabindex="0" class="prism-code language-undefined codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">curl --location --request POST &#x27;https://{YOUR_APP_ID}.cloud.ditto.live/api/v2/store/write&#x27; \</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">--header &#x27;X-DITTO-CLIENT-ID: AAAAAAAAAAAAAAAAAAAABQ==&#x27; \</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">--header &#x27;Authorization: Bearer {YOUR_API_KEY}&#x27; \</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">--data-raw &#x27;{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    &quot;commands&quot;: [{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      &quot;method&quot;: &quot;upsert&quot;,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      &quot;collection&quot;: &quot;people&quot;,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      &quot;value&quot;: {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        &quot;name&quot;: &quot;Susan&quot;, &quot;age&quot;: 31</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  }&#x27;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="online-with-authentication">Online With Authentication<a aria-hidden="true" class="hash-link" href="#online-with-authentication" title="Direct link to heading">​</a></h3><p>There are specific cases where a broad, long-lived HTTP API key is not the right
authorization mechanism. For user-scoped credentials, you can use a JWT retrieved from <a href="/common/security/authentication/overview">Online With
Authentication</a> to secure your
HTTP endpoint. To retrieve a JWT for a particular user, send a POST request to the Big Peer
with the given provider and the user&#x27;s token.</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W"><pre tabindex="0" class="prism-code language-undefined codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">curl --location \</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    --request POST &#x27;{YOUR_APP_ID}.cloud.ditto.live/_ditto/auth/login&#x27; \</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    --data-raw &#x27;appId={YOUR_APP_ID}&amp;provider={YOUR_PROVIDER}&amp;token={USER_TOKEN}&amp;siteId=1&#x27;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div><p>Once you have this token, you can use it as part of the <code>Authorization: Bearer</code> HTTP header in subsequent requests (as seen in the previous section).</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="errors">Errors<a aria-hidden="true" class="hash-link" href="#errors" title="Direct link to heading">​</a></h3><p>Ditto HTTP API errors are indicated with an HTTP Status Code and with a JSON response body containing an object with a single &quot;error&quot; key. This Error object contains the following fields:</p><ul><li>error.code - The HTTP Status Code for</li><li>error.message - A short description of the error</li><li>error.data - An optional object which contains further elaboration about the error</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="advanced">Advanced<a aria-hidden="true" class="hash-link" href="#advanced" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="transactions">Transactions<a aria-hidden="true" class="hash-link" href="#transactions" title="Direct link to heading">​</a></h3><p>A successful response to POST or DELETE requests will include a
Transaction ID, which can be used on subsequent GET requests. This type of
insertion is non-blocking and so is very performant.</p><p>Each HTTP API write request represents a distinct transaction which may be one
or many operations (e.g., upsert or remove). Because Ditto is also a distributed
system, <code>Transaction ID</code>s are used to represent the order in which transactions
should be applied. Each write request returns it&#x27;s associated <code>Transaction ID</code>. </p><p>GET requests can optionally specify a Transaction ID in an HTTP
HEADER called <code>X-DITTO-TXN-ID</code>. This header will instruct the
server to wait until the given transaction is applied before executing the
query. The newly inserted events may still be replicating through the Ditto mesh
between the time of the write and the time of the find request. If you don&#x27;t supply this header, the default behavior is to use the
most recent version common to all Ditto nodes. If the Ditto node
servicing the Request can&#x27;t supply the version of the data requested, an error
will be returned.</p><p>For example, you write data using the HTTP API and get back Transaction 17. If
you want to ensure that the values included in Transaction included in our
subsequent query, we would include the header <code>X-DITTO-TXN-ID: 17</code> in the next request. </p><h3 class="anchor anchorWithStickyNavbar_31ik" id="remove-wins">Remove Wins<a aria-hidden="true" class="hash-link" href="#remove-wins" title="Direct link to heading">​</a></h3><p>Ditto uses &quot;remove-wins&quot; semantics, so in some situations the client may want to
force Ditto to first read its current data and ensure another peer hasn&#x27;t issued
a concurrent DELETE request before attempting an insertion with a POST request.
To do this, the client provides the HTTP HEADER <code>X-DITTO-ENSURE-INSERT: true</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/getditto/docs/tree/main/docs/http/installation.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/http/api"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Reference<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a><ul><li><a href="#endpoint" class="table-of-contents__link toc-highlight">Endpoint</a></li><li><a href="#generating-a-client-id" class="table-of-contents__link toc-highlight">Generating a Client ID</a></li></ul></li><li><a href="#authorization" class="table-of-contents__link toc-highlight">Authorization</a><ul><li><a href="#api-key" class="table-of-contents__link toc-highlight">API Key</a></li><li><a href="#online-with-authentication" class="table-of-contents__link toc-highlight">Online With Authentication</a></li><li><a href="#errors" class="table-of-contents__link toc-highlight">Errors</a></li></ul></li><li><a href="#advanced" class="table-of-contents__link toc-highlight">Advanced</a><ul><li><a href="#transactions" class="table-of-contents__link toc-highlight">Transactions</a></li><li><a href="#remove-wins" class="table-of-contents__link toc-highlight">Remove Wins</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Documentation</a></li><li class="footer__item"><a href="https://www.ditto.live/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Main Website</span></a></li><li class="footer__item"><a href="https://github.com/getditto/samples" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Example Apps</span></a></li><li class="footer__item"><a class="footer__link-item" href="/changelog">Changelog</a></li><li class="footer__item"><a href="https://portal.ditto.live" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Login</span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/getditto/docs/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub Discussions</span></a></li><li class="footer__item"><a href="https://github.com/getditto/docs/discussions/categories/roadmap-and-ideas" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Roadmap</span></a></li><li class="footer__item"><a href="https://github.com/getditto/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Open Source</span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/ditto" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow</span></a></li><li class="footer__item"><a href="https://twitter.com/dittolive" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter</span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 DittoLive, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9b8fd043.js"></script>
<script src="/assets/js/main.b87f868f.js"></script>
<!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PV7QFWF" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) --></body>
</html>